<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="contactmatrix">
<title>Design Principles • contactmatrix</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Design Principles">
<meta property="og:description" content="contactmatrix">
<meta property="og:image" content="/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XZ471458FQ');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark" data-bs-theme="dark"><div class="container">
    
    <a href="https://epiverse-trace.github.io/" class="external-link"><img src="../logo_white.svg" id="logo" alt="Epiverse-TRACE"></a>
    <a class="navbar-brand me-2" href="../index.html">contactmatrix</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/design-principles.html">Design Principles</a>
  </div>
</li>
      </ul>
<ul class="navbar-nav">
<li><form class="form-inline" role="search">
<input type="search" class="form-control" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Design Principles</h1>
            
      
      
      <div class="d-none name"><code>design-principles.Rmd</code></div>
    </div>

    
    
<p>This vignette outlines the design decisions that have been taken
during the development of the contactmatrix R package, and provides some
of the reasoning, and possible pros and cons of each decision.</p>
<p>This document is primarily intended to be read by those interested in
understanding the code within the package and for potential package
contributors.</p>
<div class="section level2">
<h2 id="scope">Scope<a class="anchor" aria-label="anchor" href="#scope"></a>
</h2>
<p>This package aims to provide a standardised way of dealing with
empirical and synthetic social contacts data, such as data from the <a href="https://cran.r-project.org/package=socialmixr" class="external-link">socialmixr</a>, <a href="https://cran.r-project.org/package=contactdata" class="external-link">contactdata</a>,
and <a href="https://idem-lab.github.io/conmat/" class="external-link">conmat</a> R packages.
The main rationale is to allow downstream analysis and modelling
packages to seamlessly switch from one package to the other without
having to reformat the input data. This new contact matrix package will
provide a shared, basic, contact matrix class. It is expected that some
packages will use this class as an single element in a more complex list
output (e.g., socialmixr also includes a citation element)</p>
</div>
<div class="section level2">
<h2 id="classes">Classes<a class="anchor" aria-label="anchor" href="#classes"></a>
</h2>
<div class="section level3">
<h3 id="contactmatrix">
<code>contactmatrix</code><a class="anchor" aria-label="anchor" href="#contactmatrix"></a>
</h3>
<ul class="task-list">
<li><label><input type="checkbox" checked>Inherits from array
(matrix for 2D) to leverage existing methods, and utility functions
(e.g., <code><a href="https://rdrr.io/r/base/t.html" class="external-link">t()</a></code>)</label></li>
<li><label><input type="checkbox" checked>Puts survey participants
(“from”) in rows</label></li>
<li><label><input type="checkbox" checked>Levels are ordered
lexicographically (using C locale)</label></li>
<li><label><input type="checkbox" checked>Boolean
<code>attr(cm, “symmetric”)</code> to determine if <span class="math inline">\(c_{ij}N_i == c_{ji}N_j\)</span></label></li>
<li><label><input type="checkbox">Standardized notation to denote
age-bins</label></li>
</ul>
</div>
<div class="section level3">
<h3 id="special-case-of-multiple-groupings">Special case of multiple groupings<a class="anchor" aria-label="anchor" href="#special-case-of-multiple-groupings"></a>
</h3>
<p>Although currently rare, we can theoretically consider contact
matrices with multiple groupings (e.g. age &amp; gender). To ensure
forward-compatibility if this ever becomes more common practice, we
allow multiple groupings in the form or multi-dimensional arrays.</p>
<ul class="task-list">
<li><label><input type="checkbox">Groupings are ordered
lexicographically (using C locale) with the first being the most
external.</label></li>
</ul>
</div>
<div class="section level3">
<h3 id="contactmatrix_list">
<code>contactmatrix_list</code><a class="anchor" aria-label="anchor" href="#contactmatrix_list"></a>
</h3>
<p>A list of <code>contactmatrix</code> from different settings, or just
different runs of the socialmixr algorithm to convert survey data to a
contact matrix.</p>
</div>
</div>
<div class="section level2">
<h2 id="functions-and-methods">Functions and methods<a class="anchor" aria-label="anchor" href="#functions-and-methods"></a>
</h2>
<div class="section level3">
<h3 id="class-infrastructure">Class infrastructure<a class="anchor" aria-label="anchor" href="#class-infrastructure"></a>
</h3>
<ul class="task-list">
<li><label><input type="checkbox" checked>a
<code>new_&lt;class&gt;()</code> function to “manually” construct a new
object of the given class</label></li>
<li>
<label><input type="checkbox" checked>two validation functions
based on the checkmate package terminology:</label>
<ul>
<li>an <code>assert_&lt;class&gt;(x)</code> function which returns an
error or <code>x</code> invisibly</li>
<li>a <code>test_&lt;class&gt;(x)</code> function which returns a
boolean</li>
</ul>
</li>
<li><label><input type="checkbox" checked>an
<code>is_&lt;class&gt;()</code> function to check if an object is of the
given class, <em>without</em> checking its validity</label></li>
<li><label><input type="checkbox"><code><a href="../reference/as_contactmatrix.html">as_contactmatrix()</a></code>
generic</label></li>
</ul>
</div>
<div class="section level3">
<h3 id="custom-methods">Custom methods<a class="anchor" aria-label="anchor" href="#custom-methods"></a>
</h3>
<ul class="task-list">
<li><label><input type="checkbox"><code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> method for
visualisation</label></li>
<li>
<label><input type="checkbox"><code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> method for
human-readable output:</label>
<ul class="task-list">
<li><label><input type="checkbox">Show levels</label></li>
</ul>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="helpers">Helpers<a class="anchor" aria-label="anchor" href="#helpers"></a>
</h3>
<ul class="task-list">
<li><label><input type="checkbox">Helper to convert to long
format;</label></li>
<li><label><input type="checkbox">Helper to transform and interpolate
between ages in bins of various sizes.</label></li>
<li><label><input type="checkbox" checked>Helper to summarise a
contactmatrix_list into a contactmatrix
(<code>aggregate_contactmatrix_list()</code>)</label></li>
<li><label><input type="checkbox">Helper to obtain the age bins and
breaks (if present) in terms of a vector with min or max ages, but also
a text-format for figure labels etc.</label></li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="dependencies">Dependencies<a class="anchor" aria-label="anchor" href="#dependencies"></a>
</h2>
<p>This package is placed at the low position in the dependency stack,
and should therefore depend itself on as few packages as possible.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hugo Gruson, Tim Taylor.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.9000.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
