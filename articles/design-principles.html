<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Design Principles • contactmatrix</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Design Principles">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">contactmatrix</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/design-principles.html">Design Principles</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/socialcontactdata/contactmatrix/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Design Principles</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/socialcontactdata/contactmatrix/blob/main/vignettes/design-principles.Rmd" class="external-link"><code>vignettes/design-principles.Rmd</code></a></small>
      <div class="d-none name"><code>design-principles.Rmd</code></div>
    </div>

    
    
<p>This vignette outlines the design decisions that have been taken
during the development of the contactmatrix R package, and provides some
of the reasoning, and possible pros and cons of each decision.</p>
<p>This document is primarily intended to be read by those interested in
understanding the code within the package and for potential package
contributors.</p>
<div class="section level2">
<h2 id="scope">Scope<a class="anchor" aria-label="anchor" href="#scope"></a>
</h2>
<p>This package aims to provide a standardised way of dealing with
empirical and synthetic social contacts data, such as data from the <a href="https://cran.r-project.org/package=socialmixr" class="external-link">socialmixr</a>, <a href="https://cran.r-project.org/package=contactdata" class="external-link">contactdata</a>,
and <a href="https://idem-lab.github.io/conmat/" class="external-link">conmat</a> R packages.
The main rationale is to allow downstream analysis and modelling
packages to seamlessly switch from one package to the other without
having to reformat the input data. This new contact matrix package will
provide a shared, basic, contact matrix class. It is expected that some
packages will use this class as an single element in a more complex list
output (e.g., socialmixr also includes a citation element)</p>
</div>
<div class="section level2">
<h2 id="classes">Classes<a class="anchor" aria-label="anchor" href="#classes"></a>
</h2>
<div class="section level3">
<h3 id="contactmatrix">
<code>contactmatrix</code><a class="anchor" aria-label="anchor" href="#contactmatrix"></a>
</h3>
<ul class="task-list">
<li>
<label><input type="checkbox" checked>Inherits from array
(matrix for 2D) to leverage existing methods, and utility functions
(e.g., <code><a href="https://rdrr.io/r/base/t.html" class="external-link">t()</a></code>)</label>
<ul>
<li>✓ used in socialmixr</li>
<li>✓ used in contactdata</li>
<li>✓ used in conmat</li>
</ul>
</li>
<li>
<label><input type="checkbox" checked>Puts survey participants
in rows:</label>
<ul>
<li>✓ used in socialmixr</li>
<li>✓ used in contactdata</li>
<li>✗ transposed in conmat</li>
</ul>
</li>
<li><label><input type="checkbox" checked>Levels are ordered
lexicographically (using C locale)</label></li>
<li><label><input type="checkbox" checked>Boolean
<code>attr(cm, “symmetric”)</code> to determine if
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><msub><mi>N</mi><mi>i</mi></msub><mo>=</mo><mo>=</mo><msub><mi>c</mi><mrow><mi>j</mi><mi>i</mi></mrow></msub><msub><mi>N</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">c_{ij}N_i == c_{ji}N_j</annotation></semantics></math></label></li>
<li>
<label><input type="checkbox" checked>Standardized notation to
denote age-bins (<code>[low, high)</code>):</label>
<ul>
<li>✓ used in socialmixr</li>
<li>✓ used in contactdata</li>
<li>✓ used in conmat plots</li>
<li>✓ used in Epiverse-TRACE plots</li>
</ul>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="special-case-of-multiple-groupings">Special case of multiple groupings<a class="anchor" aria-label="anchor" href="#special-case-of-multiple-groupings"></a>
</h3>
<p>Although currently rare, we can theoretically consider contact
matrices with multiple groupings (e.g. age &amp; gender). To ensure
forward-compatibility if this ever becomes more common practice, we
allow multiple groupings in the form or multi-dimensional arrays.</p>
<ul class="task-list">
<li><label><input type="checkbox">Groupings are ordered
lexicographically (using C locale) with the first being the most
external.</label></li>
</ul>
</div>
<div class="section level3">
<h3 id="contactmatrix_list">
<code>contactmatrix_list</code><a class="anchor" aria-label="anchor" href="#contactmatrix_list"></a>
</h3>
<p>A list of <code>contactmatrix</code> from different settings, or just
different runs of the socialmixr algorithm to convert survey data to a
contact matrix.</p>
</div>
</div>
<div class="section level2">
<h2 id="functions-and-methods">Functions and methods<a class="anchor" aria-label="anchor" href="#functions-and-methods"></a>
</h2>
<div class="section level3">
<h3 id="class-infrastructure">Class infrastructure<a class="anchor" aria-label="anchor" href="#class-infrastructure"></a>
</h3>
<ul class="task-list">
<li><label><input type="checkbox" checked>a
<code>new_&lt;class&gt;()</code> function to “manually” construct a new
object of the given class</label></li>
<li>
<label><input type="checkbox" checked>two validation functions
based on the checkmate package terminology:</label>
<ul>
<li>an <code>assert_&lt;class&gt;(x)</code> function which returns an
error or <code>x</code> invisibly</li>
<li>a <code>test_&lt;class&gt;(x)</code> function which returns a
boolean</li>
</ul>
</li>
<li><label><input type="checkbox" checked>an
<code>is_&lt;class&gt;()</code> function to check if an object is of the
given class, <em>without</em> checking its validity</label></li>
<li><label><input type="checkbox" checked><code><a href="../reference/as_contactmatrix.html">as_contactmatrix()</a></code> generic</label></li>
</ul>
</div>
<div class="section level3">
<h3 id="custom-methods">Custom methods<a class="anchor" aria-label="anchor" href="#custom-methods"></a>
</h3>
<ul class="task-list">
<li><label><input type="checkbox"><code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> method for
visualisation</label></li>
<li>
<label><input type="checkbox" checked><code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code>
method for human-readable output:</label>
<ul class="task-list">
<li><label><input type="checkbox" checked>Show levels</label></li>
</ul>
</li>
<li><label><input type="checkbox" checked>Summarise a
<code>contactmatrix_list</code> into a <code>contactmatrix</code>
(<code><a href="../reference/aggregate.contactmatrix_list.html">aggregate.contactmatrix_list()</a></code>)</label></li>
<li><label><input type="checkbox" checked><code><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy()</a></code>
method to convert to long format and improves integration with the
tidyverse and in particular ggplot2</label></li>
</ul>
</div>
<div class="section level3">
<h3 id="helpers">Helpers<a class="anchor" aria-label="anchor" href="#helpers"></a>
</h3>
<ul class="task-list">
<li><label><input type="checkbox">Helper to transform and interpolate
between ages in bins of various sizes.</label></li>
<li><label><input type="checkbox" checked>Helper to make the
contact matrix symmetric (<code><a href="../reference/cm_make_symmetric.html">cm_make_symmetric()</a></code>)</label></li>
<li><label><input type="checkbox">Helper to obtain the age bins and
breaks (if present) in terms of a vector with min or max ages, but also
a text-format for figure labels etc.</label></li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="dependencies">Dependencies<a class="anchor" aria-label="anchor" href="#dependencies"></a>
</h2>
<p>This package is placed at the low position in the dependency stack,
and should therefore depend itself on as few packages as possible.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hugo Gruson, Tim Taylor.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
